<html>
    <head>
        <title>ARPA Funds Usage</title>
        <style>
            .header {
                font-weight: bold;
                padding: 20px;
                background-color: beige;
            }

            .details {
                padding: 10px;
                background-color: lightgreen;
            }

            body {
                font-family: Arial, Helvetica, sans-serif;
                font-size: 14pt;
                padding: auto;
            }

            h1 {
                color: green;
            }

            table {
                font-family: Arial, Helvetica, sans-serif;
                border-collapse: collapse;
                width: 100%;
            }

            table td, th {
                border: 1px solid #ddd;
                padding: 8px;
            }

            table tr:nth-child(even){
                background-color: #f2f2f2;
            }

            table th {
                padding-top: 12px;
                padding-bottom: 12px;
                text-align: left;
                background-color: cornflowerblue;
                color: white;
            }
        </style>
        <script>
        // When the webpage loads, call the following code...
        window.onload = (event) => {
            // Get the table
            var table = document.getElementById("data-table");
            var URL = window.location.origin.replace("9000", "5001") + "/arpa"

            const xmlhttp = new XMLHttpRequest();
            xmlhttp.onload = function() {
                try {
                    // Parse the response
                    var data = JSON.parse(this.responseText);

                    table.deleteRow(1);

                    for (let i = 0; i < data.length; i++) {

                        // Create the new row
                        var row = table.insertRow(1);
                        var idCell = row.insertCell();
                        var nameCell = row.insertCell();
                        var dateCell = row.insertCell();
                        var amountCell = row.insertCell();

                        // Get each row's data and parse it
                        var entity = data[i];
                           
                        idCell.innerHTML = entity['PROJECTID'];
                        nameCell.innerHTML = entity['PROJECTTITLE'];
                        dateCell.innerHTML = entity['DATE'];
                        amountCell.innerHTML = "$" + entity['FUND'];
                    }
                } catch (error) {
                    // Show error
                    alert(error)
                }
            }
            xmlhttp.open("GET", URL);
            xmlhttp.send();
        };
    </script>
    </head>
    <body>
        <h1>ARPA Funds Usage</h1>
        <br>
        <div>
            <div class="header">Results<br></div>
            <br>
            <br>
            <table id="data-table">
                <tr>
                    <th>
                        Project ID
                    </th>
                    <th>
                        Project Name
                    </th>
                    <th>
                        Date Posted
                    </th>
                    <th>
                        Amount
                    </th>
                </tr>
                    <td colspan="4">Loading...</td>
                <tr>   
                </tr>
            </table>
        </div>

        <br>
        <br>
        <br>
        <br>

        <footer>
            <hr>
            <p>
                <span id="year"></span> SLU Open Source <br>
                <script>document.getElementById("year").innerHTML = new Date().getFullYear();</script>
            </p>
        </footer>
    </body>
</html>
